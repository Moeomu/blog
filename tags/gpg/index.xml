<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>GPG on Misaka's Secrect Garden</title><link>https://blog.moeomu.com/tags/gpg/</link><description>Recent content in GPG on Misaka's Secrect Garden</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Tue, 28 Jun 2022 08:58:01 +0800</lastBuildDate><atom:link href="https://blog.moeomu.com/tags/gpg/index.xml" rel="self" type="application/rss+xml"/><item><title>Safer use of PGP</title><link>https://blog.moeomu.com/posts/safer-use-of-pgp/</link><pubDate>Tue, 28 Jun 2022 08:58:01 +0800</pubDate><guid>https://blog.moeomu.com/posts/safer-use-of-pgp/</guid><description>&lt;p>Source of this article: &lt;a class="link" href="https://blog.moeomu.com/posts/safer-use-of-pgp/" >MoeomuBlog&lt;/a>&lt;/p>
&lt;h2 id="introduction-of-gnupg">Introduction of GnuPG&lt;/h2>
&lt;h3 id="official-introduction">Official Introduction&lt;/h3>
&lt;blockquote>
&lt;p>Source: &lt;a class="link" href="https://www.gnupg.org/" target="_blank" rel="noopener"
>GnuPG&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>GnuPG is a complete and free implementation of the OpenPGP standard as defined by RFC4880 (also known as PGP). GnuPG allows you to encrypt and sign your data and communications; it features a versatile key management system, along with access modules for all kinds of public key directories. GnuPG, also known as GPG, is a command line tool with features for easy integration with other applications. A wealth of frontend applications and libraries are available. GnuPG also provides support for S/MIME and Secure Shell (ssh).&lt;/p>
&lt;p>Since its introduction in 1997, GnuPG is Free Software (meaning that it respects your freedom). It can be freely used, modified and distributed under the terms of the GNU General Public License .&lt;/p>
&lt;blockquote>
&lt;p>Arguing that you don&amp;rsquo;t care about the right to privacy because you have nothing to hide is no different from saying you don&amp;rsquo;t care about free speech because you have nothing to say.&lt;br>
– Edward Snowden&lt;/p>
&lt;/blockquote>
&lt;p>Using encryption helps to protect your privacy and the privacy of the people you communicate with. Encryption makes life difficult for bulk surveillance systems. GnuPG is one of the tools that Snowden used to uncover the secrets of the NSA.&lt;/p>
&lt;p>Please visit the &lt;a class="link" href="%28https://emailselfdefense.fsf.org/en/%29" >Email Self-Defense site&lt;/a> to learn how and why you should use GnuPG for your electronic communication.&lt;/p>
&lt;h3 id="so">So&lt;/h3>
&lt;h4 id="q1-why-should-i-use-gnupg">Q1: Why should I use GnuPG?&lt;/h4>
&lt;ul>
&lt;li>Because it is free software and can be used, modified and distributed freely.&lt;/li>
&lt;li>By using it, your communication information will be encrypted and secure.&lt;/li>
&lt;li>PGP can guarantee that a message is sent by someone you trust, and no one else can decrypt it except you two, and this message is transmitted without any modification of even one punctuation or one byte in between.&lt;/li>
&lt;li>A PGP-signed message can be transmitted over any untrusted channel and cannot be tampered with or decrypted by anyone in the middle.&lt;/li>
&lt;/ul>
&lt;h4 id="q2-im-obviously-not-afraid-of-censorship-what-other-reasons-do-you-have-to-recommend-gnupg">Q2: I&amp;rsquo;m obviously not afraid of censorship. What other reasons do you have to recommend GnuPG?&lt;/h4>
&lt;ul>
&lt;li>Your privacy is up to you, and most people don&amp;rsquo;t want to live under surveillance.&lt;/li>
&lt;li>If even mild criticism is not allowed, silence will be perceived as ill-intentioned. If silence were no longer allowed, it would be a crime to praise inadequate efforts. If only one voice is allowed to exist, then the only voice that exists is a lie.&lt;/li>
&lt;li>If it were more unfortunate to live in a totalitarian state, encrypted communications would protect yourself and the friends you care about.&lt;/li>
&lt;/ul>
&lt;h2 id="installation">Installation&lt;/h2>
&lt;h3 id="windows">Windows&lt;/h3>
&lt;blockquote>
&lt;p>Gpg4win is recommended, it has a complete package and an easy to use GUI.&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>Download the version for your computer from &lt;a class="link" href="https://gpg4win.org/download.html" target="_blank" rel="noopener"
>Gpg4win&lt;/a>. In general, if you have no special needs, just click the green download button.&lt;/li>
&lt;/ul>
&lt;h3 id="macos">macOS&lt;/h3>
&lt;blockquote>
&lt;p>GPGSuite is recommended&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>Download the version for your computer from &lt;a class="link" href="https://gpgtools.org" target="_blank" rel="noopener"
>GPGSuite&lt;/a>. In general, if you have no special needs, just click the red download button.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>Reminder: GPGMail in the GPGSuite suite is paid software, so if you need to use it to automatically encrypt emails, then you need to purchase GPGMail. but rest assured that the encrypted signature of text and files is completely free.&lt;/p>
&lt;/blockquote>
&lt;h3 id="linux">Linux&lt;/h3>
&lt;blockquote>
&lt;p>GnuPG is recommended&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>Most Linux distributions come with GnuPG pre-installed and you do not need to install any software. However, it is recommended that you install a GUI management interface &lt;code>GPA&lt;/code>, as it is more user-friendly.&lt;/li>
&lt;/ul>
&lt;h2 id="generating-keys">Generating keys&lt;/h2>
&lt;blockquote>
&lt;p>Please experiment with this section first, and then generate your main key after you become proficient.&lt;/p>
&lt;/blockquote>
&lt;h3 id="generate-a-master-key">Generate a master key&lt;/h3>
&lt;ul>
&lt;li>Enter the command &lt;code>gpg -expert --full-gen-key&lt;/code>&lt;/li>
&lt;li>Select key type: default&lt;/li>
&lt;li>Enter the key length: 4096&lt;/li>
&lt;li>Enter the key expiration time: &lt;code>2y&lt;/code> (for two years, you can enter 0 to never expire, you can change the key expiration time at any time), enter y to confirm.&lt;/li>
&lt;li>Enter your name, this is optional, you can enter your screen name or even leave it out.&lt;/li>
&lt;li>Enter your email, which is optional and can even be left out. If you want to use email encryption, then you must enter it.&lt;/li>
&lt;li>Enter a note, which can be left blank.&lt;/li>
&lt;li>Enter O to confirm the information is correct, then you need to enter a key password to start the key generation.&lt;/li>
&lt;/ul>
&lt;h3 id="generate-revocation-certificate">Generate revocation certificate&lt;/h3>
&lt;blockquote>
&lt;p>If you lose your master key (or it is taken), you can use a revocation certificate to prove that it is no longer in use. If you do not have a revocation certificate, then you must notify your friends one by one.&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>Enter the command &lt;code>gpg --gen-revoke -ao revoke.pgp email@email.com #uid or key id&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="view-subkeys">View subkeys&lt;/h3>
&lt;blockquote>
&lt;p>The master key should not be used on a daily basis, you should use the generated subkeys on a daily basis. The advantage of this is that if you leak a subkey, you can immediately revoke it without having to deprecate the entire key pair.&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>List all public keys and subkeys: &lt;code>-list-keys&lt;/code> or &lt;code>gpg -k&lt;/code>&lt;/li>
&lt;li>List all keys, subkeys: &lt;code>-list-secret-keys&lt;/code> or &lt;code>gpg -K&lt;/code>&lt;/li>
&lt;li>To see the key fingerprint information, you can add the &lt;code>-fingerprint&lt;/code> parameter, such as &lt;code>gpg --list-secret-keys --fingerprint&lt;/code>&lt;/li>
&lt;li>If you want to see the key ID information, you can add the &lt;code>-keyid-format long&lt;/code> parameter, such as &lt;code>gpg --list-secret-keys --keyid-format long&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="exporting-keys">Exporting keys&lt;/h2>
&lt;blockquote>
&lt;p>Since subkeys are to be used for daily use, the master key should not exist in the same place, GPG cannot delete the key, it can only export and pour in only the subkeys needed.&lt;/p>
&lt;p>Note: The exclamation mark after the key ID cannot be missing, otherwise all keys will be exported&lt;/p>
&lt;/blockquote>
&lt;h3 id="export-public-key">Export public key&lt;/h3>
&lt;ul>
&lt;li>Export public key: &lt;code>gpg -ao public-key --export master-key-id&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="export-the-master-key">Export the master key&lt;/h3>
&lt;ul>
&lt;li>Enter the command &lt;code>gpg -ao master-key --export-secret-key master-key ID!&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="export-subkeys">Export subkeys&lt;/h3>
&lt;ul>
&lt;li>Enter the command &lt;code>gpg -ao sub-key --export-secret-subkeys Sub-key ID!&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="import-keys">Import keys&lt;/h2>
&lt;ul>
&lt;li>Enter the command &lt;code>gpg --import filename&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="communicate-securely-with-your-friends">Communicate securely with your friends&lt;/h2>
&lt;ul>
&lt;li>Now that you&amp;rsquo;re done, you&amp;rsquo;ll have a hard time leaving PGP after you get into the habit of using it daily&lt;/li>
&lt;/ul>
&lt;h2 id="publish-to-the-public-key-server">Publish to the public key server&lt;/h2>
&lt;p>&amp;hellip; To be continued&amp;hellip;&lt;/p>
&lt;h2 id="references">References&lt;/h2>
&lt;ul>
&lt;li>Ulyc. (2021, January 13). 2021年，用更现代的方法使用PGP（上）. C的博客. &lt;a class="link" href="https://ulyc.github.io/2021/01/13/2021%e5%b9%b4-%e7%94%a8%e6%9b%b4%e7%8e%b0%e4%bb%a3%e7%9a%84%e6%96%b9%e6%b3%95%e4%bd%bf%e7%94%a8PGP-%e4%b8%8a/" target="_blank" rel="noopener"
>https://ulyc.github.io/2021/01/13/2021年-用更现代的方法使用PGP-上/&lt;/a>&lt;/li>
&lt;li>Ulyc. (2021, January 13). 2021年，用更现代的方法使用PGP（中）. C的博客. &lt;a class="link" href="https://ulyc.github.io/2021/01/13/2021%e5%b9%b4-%e7%94%a8%e6%9b%b4%e7%8e%b0%e4%bb%a3%e7%9a%84%e6%96%b9%e6%b3%95%e4%bd%bf%e7%94%a8PGP-%e4%b8%ad/" target="_blank" rel="noopener"
>https://ulyc.github.io/2021/01/13/2021年-用更现代的方法使用PGP-中/&lt;/a>&lt;/li>
&lt;li>Ulyc. (2021, January 13). 2021年，用更现代的方法使用PGP（下）. C的博客. &lt;a class="link" href="https://ulyc.github.io/2021/01/13/2021%e5%b9%b4-%e7%94%a8%e6%9b%b4%e7%8e%b0%e4%bb%a3%e7%9a%84%e6%96%b9%e6%b3%95%e4%bd%bf%e7%94%a8PGP-%e4%b8%8b/" target="_blank" rel="noopener"
>https://ulyc.github.io/2021/01/13/2021年-用更现代的方法使用PGP-下/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Signing Git Commit with GPG on Windows</title><link>https://blog.moeomu.com/posts/signing-git-commit-with-gpg-on-windows/</link><pubDate>Sat, 05 Jun 2021 08:50:00 +0800</pubDate><guid>https://blog.moeomu.com/posts/signing-git-commit-with-gpg-on-windows/</guid><description>&lt;p>Source: &lt;a class="link" href="https://blog.moeomu.com/posts/signing-git-commit-with-gpg-on-windows/" >Moeomu&amp;rsquo;s Blog&lt;/a>&lt;/p>
&lt;h2 id="download-gpg4win">Download GPG4WIN&lt;/h2>
&lt;p>Download link: &lt;a class="link" href="https://www.gpg4win.org/thanks-for-download.html" target="_blank" rel="noopener"
>gpg4win&lt;/a>&lt;/p>
&lt;h2 id="create-and-apply-gpg-key">Create and apply GPG key&lt;/h2>
&lt;h3 id="create-gpg-key">Create GPG key&lt;/h3>
&lt;ul>
&lt;li>Create: &lt;code>gpg --full-generate-key&lt;/code>&lt;/li>
&lt;li>Key length: &lt;code>4096&lt;/code>&lt;/li>
&lt;li>Enter username, email&lt;/li>
&lt;li>List all keys: &lt;code>gpg --list-secret-keys --keyid-format=long&lt;/code>&lt;/li>
&lt;li>Export keys according to keyid: &lt;code>gpg --armor --export KEYID&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="apply-the-key">Apply the key&lt;/h3>
&lt;ul>
&lt;li>Import the key into Github and Gitee&lt;/li>
&lt;/ul>
&lt;h2 id="configure-git-windows">Configure Git Windows&lt;/h2>
&lt;ul>
&lt;li>Configure the default username and email, which needs to be the same as the values set when creating GPG
&lt;ul>
&lt;li>&lt;code>git config --global user.name USERNAME&lt;/code>&lt;/li>
&lt;li>&lt;code>git config --global user.email EMAIL&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Configure the key
&lt;ul>
&lt;li>&lt;code>git config --global user.signingKey KEYID&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Enable global cryptographic signatures
&lt;ul>
&lt;li>&lt;code>git config --global commit.gpgSign true&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Using GPG to sign Git Commit under macOS</title><link>https://blog.moeomu.com/posts/using-gpg-to-sign-git-commit-under-macos/</link><pubDate>Tue, 25 May 2021 07:55:00 +0800</pubDate><guid>https://blog.moeomu.com/posts/using-gpg-to-sign-git-commit-under-macos/</guid><description>&lt;p>Source: &lt;a class="link" href="https://blog.moeomu.com/posts/using-gpg-to-sign-git-commit-under-macos/" >Moeomu&amp;rsquo;s Blog&lt;/a>&lt;/p>
&lt;h2 id="about-github-gpg-key-verification">About GitHub GPG Key Verification&lt;/h2>
&lt;h3 id="enabling-commit-signing">Enabling Commit Signing&lt;/h3>
&lt;p>GitHub has a new &amp;ldquo;Vigilance Mode&amp;rdquo; that requires a GPG key to sign a certified commit before it will show &amp;ldquo;Verity&amp;rdquo;.&lt;/p>
&lt;ul>
&lt;li>First create a GPG key (&lt;a class="link" href="https://docs.github.com/en/github/authenticating-to-github/managing-commit-signature-verification/" target="_blank" rel="noopener"
>GitHub Official Docs&lt;/a> generating-a-new-gpg-key) has details on how to do this, so I won&amp;rsquo;t go over it again)&lt;/li>
&lt;li>List the GPG key&amp;rsquo;s signature: &lt;code>gpg -K --keyid-format LONG&lt;/code>, which will &lt;strong>keyid&lt;/strong> record&lt;/li>
&lt;li>Tell git to use this GPG key: &lt;code>git config user.signingkey your_keyid&lt;/code>&lt;/li>
&lt;li>The local git username and email need to be the same as the ones filled in when the GPG key was generated: &lt;code>git config user.name name&lt;/code>, &lt;code>git config user.email email email&lt;/code>&lt;/li>
&lt;li>Enable commit signing for local git: &lt;code>git config commit.gpgsign true&lt;/code>&lt;/li>
&lt;li>Add the -S option to the Commit signature: &lt;code>git commit -S -m message&lt;/code>&lt;/li>
&lt;/ul>
&lt;h3 id="fatal-error-occurred---unable-to-commit-macos">Fatal error occurred - unable to commit-macOS&lt;/h3>
&lt;h4 id="the-problem-is-as-follows-reproduced-in-macos-1131">The problem is as follows, reproduced in macOS 11.3.1&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">error: gpg failed to sign the data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fatal: failed to write commit object
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="solution-in-macos">solution in macOS&lt;/h4>
&lt;ul>
&lt;li>Update &amp;amp; Install&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">brew upgrade gnupg &lt;span class="c1"># This has a make step which takes a while&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">brew link --overwrite gnupg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">brew install pinentry-mac
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;pinentry-program /usr/local/bin/pinentry-mac&amp;#34;&lt;/span> &amp;gt;&amp;gt; ~/.gnupg/gpg-agent.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">killall gpg-agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global gpg.program gpg &lt;span class="c1"># perhaps you had this already? On linux maybe gpg2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global commit.gpgsign &lt;span class="nb">true&lt;/span> &lt;span class="c1"># if you want to sign every commit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Sign again&lt;/li>
&lt;li>Check the status of the commit: &lt;code>git log --show-signature -1&lt;/code>&lt;/li>
&lt;/ul></description></item></channel></rss>